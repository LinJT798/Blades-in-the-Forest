# 《神秘森林》设计与实现需求

---

## 1. 游戏概述与流程

### 1.1 游戏概述  
《神秘森林》是一款2D横版动作冒险游戏，玩家扮演勇士在神秘森林中冒险，击败怪物并挑战死神BOSS，拯救被诅咒的森林。
**核心特性**包括：像素艺术风格、流畅动作系统、精力管理、多层视差背景、丰富敌人类型。

### 1.2 游戏流程  
- **首页阶段**：显示Logo、开始/退出按钮，森林远景背景，缓慢视差滚动。  
- **出生阶段**：出生点坐标使用地图文件中的对象层中的出生点位置；初始 HP 100/100、SP 100/100、金币0；显示基础操作提示（移动、跳跃、攻击）。  
- **闯关阶段**：从左至右穿越总长4800px的地图；    
- **BOSS战阶段**：打开大宝箱后死神出现；摄像机锁定在4000-4500px范围；胜利条件为将死神HP降至0。  
- **胜利阶段**：死神消失、森林恢复；结算界面显示通关时间、金币总数、死亡次数；可返回首页或重开。

### 1.3 核心系统（总述）  
- **战斗系统**：简化数值（攻击/生命）；引入精力系统；防御减伤70%且消耗精力。  
- **动画系统**：主角14种动作（详见第3章）；敌人3-4种状态；环境动画（商店灯光、金币旋转等）。  
- **物理系统**：重力500 px/s²；跳跃高度200 px；移动速度：行走150、奔跑250 px/s。

---

## 2. 地图资源与关卡配置

### 2.1 地图概述  
- **编辑器**：Tiled  
- **主地图文件**：`map/map_full.tmj`  
- **地图文件格式**：TMJ（内嵌式，Embedded Tileset）  
- **地图尺寸**：200×12格（4800×288 px）

### 2.2 地图层级结构  
**背景层（渲染顺序）**：  
| 层名称 | 文件路径 | 视差系数 | 说明 |
|---|---|---|---|
| 远景层 | background/background_layer_1.png | 0.2 | 最远背景，移动最慢 |
| 中景层 | background/background_layer_2.png | 0.6 | 中间层背景 |
| 近景层 | background/background_layer_3.png | 1.0 | 最近背景层 |

**要求**：横向重复（repeatx: true）；根据摄像机移动应用视差；不参与碰撞。

**地块层（Tilemap Layer）**：  
- 瓦片集：`oak_woods_tileset`（24×24 px/格）  
- 瓦片ID：1-315 为实体地形可碰撞；0为空白不碰撞。

**装饰层（Decoration Layer）**（瓦片ID 316-327）：  
> **渲染尺寸以本表“尺寸”列为准，素材需缩放至该尺寸显示。**  
> **碰撞仅对 rock_1/rock_2/rock_3 生效，其余装饰无碰撞。**

| 瓦片ID | 装饰物 | 尺寸 | 碰撞设置 |
|---|---|---|---|
| 316 | fence_1 | 73×19 | 无碰撞 |
| 317 | fence_2 | 72×19 | 无碰撞 |
| 318 | grass_1 | 8×3 | 无碰撞 |
| 319 | grass_2 | 10×5 | 无碰撞 |
| 320 | grass_3 | 9×4 | 无碰撞 |
| 321 | lamp | 23×57 | 无碰撞 |
| 322 | rock_1 | 20×11 | **需要碰撞** |
| 323 | rock_2 | 27×12 | **需要碰撞** |
| 324 | rock_3 | 45×18 | **需要碰撞** |
| 325 | shop_anim | 708×128 | 无碰撞 |
| 326 | shop | 118×98 | 无碰撞 |
| 327 | sign | 22×31 | 无碰撞 |

> **说明**：若同一“商店”既作为装饰渲染（326/325）又作为可交互对象使用，**渲染尺寸以装饰层为准**；交互体的**碰撞盒与交互范围**可独立配置（通常仅底部/门槛处需要物理碰撞）。

### 2.3 对象层配置  
**敌人生成点**：  
- 史莱姆×7：开局生成，附近巡逻，慢速。  
- 骷髅兵×5：开局生成，附近巡逻，中速。  
- 死神×1：打开大宝箱触发，BOSS。  

> **说明**：所有敌人生成点均通过Tiled对象层的“标记点位”配置，游戏加载时自动读取对象层中对应类型的点位进行生成。请在Tiled中为每个敌人类型分别设置对象（如 type: slime, skull, boss_death），并合理命名或分组，便于程序识别与批量生成。

**互动对象**：  
- 小宝箱、大宝箱、商店的位置均通过Tiled对象层中的点位进行生成。  
- 小宝箱：J键打开，掉落金币/道具。  
- 大宝箱：J键打开，掉落稀有道具或大量金币，触发BOSS。  
- 商店：J键进入，打开商店界面。  

**系统对象**：  
- 出生点：玩家初始位置(58, 233)，以以对象层中的点位为准 
- 攻击教学/爬墙教学：进入区域显示提示。

### 2.4 技术实现要求（地图/碰撞/对象/视差）  
**地图加载（Phaser）**  
- 需从 `map/map_full.tmj` 加载 TMJ（内嵌式）主地图文件；  
- 同时加载地形瓦片纹理 `Asset/oak_woods_tileset.png`；  
- 加载完成后将地图与瓦片集正确关联，并据此创建地块层与装饰层。

**碰撞设置**  
- 地块层：除瓦片ID 0 外，所有瓦片必须设为可碰撞；  
- 装饰层：仅 `rock_1(322)`、`rock_2(323)`、`rock_3(324)` 需要开启碰撞，其余装饰不参与碰撞；  
- 在创建地块层时，需使用 `oak_woods_tileset` 与已加载的瓦片贴图建立关联，以确保碰撞和渲染一致。

**装饰物缩放（建议做法）**  
- 若装饰物以对象或图片方式渲染，必须按“装饰层尺寸表”中的目标宽高进行等比缩放，确保显示尺寸统一；  
- 示例要求：静态 `shop` 的显示尺寸为 118×98。

**对象生成**  
- 从地图的“对象层”中读取配置项，依据对象的 `type` 或 `name` 字段进行识别与实例化；  
- 必须支持以下对象：`史莱姆`、`骷髅兵`、`死神（BOSS）`、`小宝箱`、`大宝箱`、`商店`、`出生点`；  
- `出生点` 对象用于确定玩家初始坐标，应保存为一个位置向量（x, y），并在场景开始时应用。

**视差滚动**  
- 背景需随摄像机水平方向移动而偏移：远景层偏移系数 0.2，中景层 0.6，近景层 1.0；  
- 背景应支持横向重复以覆盖整张地图。

### 2.5 性能优化与特殊说明  
- **性能**：裁剪只渲染可视区域；对象池（敌人/特效）；空间分区减少碰撞；资源预加载于loading场景。  
- **特殊**：Tiled对象坐标为像素坐标直接用；渲染顺序：背景→地块→装饰→游戏对象→UI；部分装饰（如商店）仅底部碰撞需自定义碰撞盒；设置世界边界防止离开地图区域。

---

## 3. 主角动画与数值系统

### 3.1 动画资源概述  
主角像素风格，精灵尺寸56×56，动画资源在 `player_1.png` 与 `player_2.png` 两个图集中。帧-动作映射以各动画文件夹内 `animation_config.json` 为准（本文档定义种类与功能需求）。

### 3.2 必需动画列表  
**基础状态**：  
- idle（6帧）、walking（10帧）、run（8帧）。  

**战斗**：  
- attack_1hit（6）、combo_attack（2）、shield_defense（3）。  

**跳跃系统**：  
- jump_prepare（2）、flying_up（4）、falling（4）、landing（3）。  

**特殊移动**：  
- wall_slide_start（3）、wall_slide_loop（1）。  

**状态反馈**：  
- be_attacked（4）、death（12）。

### 3.3 操作输入映射  
- A/D → walking；Shift+A/D → run；Space → 跳跃序列；J → 普攻；J+J（时间窗内）→ 连击；K（按住）→ 防御；W（贴墙时）→ 墙滑。  
- 自动触发：垂直速度<0→falling；接地→landing；landing后按输入转入 idle/walking/run；受击→be_attacked；HP=0→death。  
- 特殊机制：连击时间窗口（attack_1hit第4-6帧按J）；墙壁检测（贴墙且空中按W触发墙滑）；墙跳（墙滑时按Space向反方向弹跳并进入jump）。

### 3.4 动画播放规则与帧率  
- **优先级**：death > be_attacked >（攻击/跳跃）> 移动 > idle。  
- **过渡**：idle↔walking/run平滑；地面→jump_prepare→flying_up连贯；falling→landing→后续状态按输入切换；任意→be_attacked立即切换（除death）。  
- **默认帧率**：10 FPS，可按动作调整。

### 3.5 数值与战斗机制  
**主角基础属性**：  
- HP上限100、SP上限100；初始HP/SP均100。  
- 基础攻击10、连击15；walking速度150 px/s、run速度250 px/s；跳跃高度200 px。  

**精力系统**：  
- 消耗：run 10 SP/s；跳跃15；普攻10；连击15；防御5 SP/s。  
- 恢复：静止5 SP/s、行走3 SP/s；SP耗尽时无法跑跳攻防。  

**攻击**：  
- **attack_1hit**：伤害10、消耗10SP、范围前方60px、判定帧3-4、CD 0.6s。  
- **combo_attack**：伤害15、额外消耗15SP、范围70px、触发条件为前招第4-6帧内按J、判定帧1。  

**防御（shield_defense）**：  
- 伤害减免70%，消耗5 SP/s，移速降至75 px/s，无法攻跳，SP耗尽自动解除。  

**受伤与死亡**：  
- 受击硬直0.5s；无敌1s（闪烁）；击退30px。  
- HP≤0 播放死亡动画并显示重生选项；重生点为最近存档点或出生点。  

**生命恢复**：  
- 拾取心心：+10HP；商店药水：+20HP（不超过上限）。  

**伤害公式**：  
- 实际伤害等于“敌人攻击力”乘以“防御状态修正”；当处于防御（shield_defense）状态时修正系数为 0.3，否则为 1.0。

**UI**：左上角血条与精力条；SP<20时闪烁提示。

**技术实现要求与优化**：  
- 动画状态机；移动类动画混合与跳跃无缝衔接；动画事件：attack_1hit在第3-4帧、combo第1帧触发判定；death最后一帧触发死亡事件；所有动画支持水平镜像。  
- 使用精灵图集减少渲染批次；动画缓存；根据与摄像机距离动态调整帧率；屏幕外暂停更新。

---

## 4. 敌人配置与AI/数值

### 4.1 敌人类型概述  
包含三类敌人：史莱姆、骷髅兵、死神（BOSS）。各自具备独特行为与动画表现。

### 4.2 史莱姆（Slime）  
**基础属性**：精灵103×56、缩放0.5、8 FPS、数量7（预设点）。  
**动画**：idle(5，循环)、fight(7，进入攻击范围)、death(7，死亡后移除)。  
**行为**：生成点左右50px范围缓慢巡逻；移动30 px/s；检测半径80px；攻击半径40px；伤害5；间隔1.5s；HP 20。  
**AI逻辑（文字描述）**：  
- 当玩家进入检测半径（80px）时，史莱姆向玩家方向移动；  
- 当玩家进入攻击半径（40px）时，播放 fight 动画并造成伤害，攻击间隔为 1.5 秒；  
- 若玩家不在检测半径内，则在出生点左右 50px 范围内以 30px/s 进行巡逻。

### 4.3 骷髅兵（Skeleton）  
**基础属性**：精灵80×65、缩放0.6、10 FPS、数量5。  
**动画**：idle(5)、run(6，追击时)、fight(11，攻击)、death(7)。  
**行为**：巡逻范围左右100px；巡逻40 px/s；追击80 px/s；检测半径120px；攻击半径50px；伤害8；间隔1.2s；HP 40。  
**AI逻辑（文字描述）**：  
- 当玩家进入检测半径（120px）时，切换为 run 动画并以 80px/s 追击玩家；  
- 当玩家进入攻击半径（50px）时，停止移动，播放 fight 动画并造成伤害，攻击间隔为 1.2 秒；  
- 若玩家不在检测半径内，则播放 idle 动画，并在巡逻范围左右 100px 内以 40px/s 巡逻。

### 4.4 死神（Death，BOSS）  
**基础属性**：精灵80×80、缩放1.0、10 FPS；打开大宝箱后出现。  
**动画**：idle(9)、fight(7)、be attacked(2，受击)、death(12)。  
**行为**：打开大宝箱后在其附近生成并逐渐显现；立即进入战斗；移速50 px/s；攻击半径60px；伤害15；间隔2s；HP 100；每损失25%HP攻击速度+10%。  
**AI逻辑（触发后，文字描述）**：  
- 当大宝箱被打开时在其附近生成 BOSS 并开始战斗；  
- BOSS 默认以 50px/s 向玩家方向移动；当玩家进入攻击半径（60px）时，播放 fight 动画并造成范围伤害，基础攻击间隔为 2 秒；  
- 难度随血量分段提升：每当 BOSS 累计损失 25% 的生命值，其攻击频率在当前基础上提升 10%。

### 4.5 战斗数值汇总与共通机制  
**敌人属性对比表**  
| 敌人类型 | 生命值 | 攻击力 | 移动速度 | 攻击间隔 | 击杀奖励（金币） |
|---------|--------|--------|----------|----------|-----------------|
| 史莱姆 | 20 HP | 5 | 30像素/秒 | 1.5秒 | 1-3个 |
| 骷髅兵 | 40 HP | 8 | 40/80像素/秒 | 1.2秒 | 2-5个 |
| 死神BOSS | 100 HP | 15 | 50像素/秒 | 2秒 | 10-15个 |

**伤害与节奏**  
- 玩家普攻10、连击15；防御状态下玩家受伤取30%。  
- **战斗节奏估算**  
| 敌人 | 击杀所需攻击次数 | 玩家承受攻击次数 | 战斗时长估算 |
|------|------------------|------------------|-------------|
| 史莱姆 | 2次普攻或2次连击 | 20次（无防御）/ 66次（防御） | 3-5秒 |
| 骷髅兵 | 4次普攻或3次连击 | 12次（无防御）/ 40次（防御） | 5-8秒 |
| 死神 | 10次普攻或7次连击 | 6次（无防御）/ 20次（防御） | 20-30秒 |

**共通机制**  
- 受击反馈：被攻击时闪白0.1s；受击后无敌0.3s；轻微击退10px。  
- 掉落系统：  
  - 史莱姆：金币1-3（100%），心心0-1（20%）  
  - 骷髅兵：金币2-5（100%），心心0-1（30%）  
  - 死神：金币10-15（100%），心心2-3（100%）  
- 重生机制：普通敌人30s后在原点重生；BOSS不重生。  
- 碰撞处理：敌人之间不可重叠；与地形碰撞，遵循重力；不可穿墙；敌人碰撞盒大小=精灵宽80%×高90%。  
- 攻击判定：矩形碰撞；在敌人前方生成；仅在攻击动画特定帧激活——史莱姆第3-4帧、骷髅兵第5-6帧、死神第3-5帧。

**性能优化**  
- 视野剔除：仅更新屏幕可见范围内±100px的敌人；超出范围暂停AI维持idle。  
- 对象池：死亡回收、重生复用；同类敌人共享动画时间轴；远离玩家降低动画帧率。

**难度调整（可配置）**  
- 敌人HP、攻击、移动速度、检测范围、攻击间隔、掉落概率与数量。

---

## 5. 互动对象、掉落与商店系统

### 5.1 互动对象  
**小宝箱（2个）**  
- 10 FPS；J键开启（半径30px）；播放open一次并保持最后帧；掉落金币5-10（100%）+心心1（40%）；会话内记录“已打开”（无跨会话存档）。

**大宝箱（1个）**  
- 10 FPS；J键开启（半径40px）；扇形散落掉落物；会话内记录“已打开”；**触发死神BOSS出现**；掉落金币15-25（100%）+心心2-3（80%）。

**商店（2个）**  
- **渲染尺寸以装饰层为准**（装饰静态：`shop` 118×98；动画：`shop_anim` 708×128）。  
- 交互：J键进入（半径50px），显示“按J进入商店”；进入商店：暂停游戏、显示商品列表。  
- 碰撞：仅需底部/门槛区域自定义碰撞盒。

**商店商品**  
| 物品 | 价格 | 效果 | 限制 |
|---|---|---|---|
| 生命药水 | 10金币 | 恢复20HP | 无限制，但不能超上限 |

**商店UI**  
- 半透明黑背景；展示心心图标、名称、价格、当前HP（XX/100）。  
- 购买按钮在金币不足/满血时置灰并显示对应文案；Esc或关闭按钮退出。

**购买流程**  
1. 金币≥10  
2. HP<100  
3. 扣10金币  
4. +20HP（不超过上限）  
5. 更新UI显示  
6. 播放购买成功动画（心心上浮）

### 5.2 掉落道具  
**金币**  
- 10 FPS旋转；存在30s；来源：击败敌人/开启宝箱；有重力与随机初速弹跳，落地后停止并循环idle；玩家接触即拾取，金币+1并更新UI。

**心心**  
- 10 FPS跳动；存在20s；来源：击败敌人（低概率）/开启宝箱；有重力与轻微弹跳，落地后原地跳动；玩家接触即拾取，+10HP并显示“+10”漂浮文字（不超过上限）。

### 5.3 掉落物生成规则与物理  
**位置与初速**  
- 掉落物初始位置：位于敌人或宝箱的中心点坐标（x, y）；  
- 初始速度：水平方向在 [-50, 50] 范围内随机，垂直方向在 [-150, -100] 范围内随机（向上抛出）。

**多个掉落分散**  
- 同时掉落采用扇形分散，避免重叠；间隔角度15-30度。

**物理模拟**  
- 重力500 px/s²；地面摩擦0.8；弹跳衰减0.5。

**交互提示**  
- 进入可交互范围且对象未使用（如宝箱未开）时，在对象上方显示“按J交互”，半透明背景，淡入淡出。

**（会话内）运行时记录**  
- 记录宝箱开启状态、玩家金币数、玩家当前/最大HP、商店购买记录；**关闭游戏后不保留**（暂无存档机制）。

**性能优化**  
- 金币/心心使用对象池（预创建金币20、心心10）；超时自动回收；离屏远的掉落物暂停动画；同类批量渲染减少draw call。

---

## 6. 技术参数与项目配置

### 6.1 摄像机与分辨率（建议）  
**摄像机**  
- 视窗686×288（约宽度1/7），仅横向跟随；死区200px；平滑0.1；边界限制X:[343, 4457]。

**分辨率适配**  
- PC：1372×576（2倍整数缩放）  
- 手机横屏：适应屏宽，保持比例  
- 平板：1029×432（1.5倍缩放），保持比例  

**性能指标**  
- 目标60 FPS，最低30 FPS；加载<3s；内存<200MB。

### 6.2 Phaser 配置与资源路径  
**Phaser配置建议**  
- 渲染类型：AUTO；窗口尺寸：宽 686、高 288；启用像素风格渲染（pixelArt = true）；  
- 物理系统：使用 Arcade，重力 y 轴为 500，调试显示关闭；  
- 缩放与居中：缩放模式 FIT，自动居中 CENTER_BOTH，父容器为 `game-container`。

**资源加载路径**  
- 精灵图集：`Asset/animation/*/`  
- 地形瓦片：`Asset/oak_woods_tileset.png`  
- 背景图层：`Asset/background/`  
- 地图文件：`map/map_full.tmj`（TMJ内嵌式）

---

## 7. 开发优先级与里程碑

- **Phase 1 - 核心功能（第1-2周）**  
  - [ ] 基础移动与跳跃  
  - [ ] 地图加载与碰撞  
  - [ ] 主角基础动画  

- **Phase 2 - 战斗系统（第3-4周）**  
  - [ ] 攻击与受击判定  
  - [ ] 精力系统  
  - [ ] 敌人AI  

- **Phase 3 - 完善体验（第5-6周）**  
  - [ ] 商店系统  
  - [ ] BOSS战  
  - [ ] UI界面  
  - [ ] 首页与结算  

---

## 8. 注意事项与特殊说明

**通用注意事项**  
1) 当前版本**无音效设计**。  
2) **暂无存档机制**（每次游戏从头开始，关闭不保留会话状态）。  
3) 数值参数应可配置，便于后期平衡。  
4) 屏幕适配优先保证 686×288 核心区域显示正确。

**地图相关特别提示**  
- 坐标系统：Tiled对象坐标为像素坐标，**可直接使用**。  
- 层级顺序：**背景 → 地块 → 装饰 → 游戏对象 → UI**。  
- 碰撞盒：部分装饰（如商店）只需**底部**碰撞，需自定义碰撞盒。  
- 地图边界：设置**世界边界**，防止角色离开地图区域。

---

## 9. 设计确认与决策（已根据你的要求固化）

- **装饰层碰撞**：仅 `rock_1(322) / rock_2(323) / rock_3(324)` 设为可碰撞，其余装饰不参与碰撞。  
- **装饰物缩放**：所有装饰物需缩放至“装饰层尺寸表”中的目标显示尺寸；渲染与交互/碰撞逻辑分离。  
- **存档机制**：当前**不支持跨会话存档**；所有状态仅在一次运行会话中有效。

---

## 10. 动画资源使用指南（Asset/animation）

### 10.1 资源结构与文件命名
- 角色/敌人/对象的动画资源均存放于 `Asset/animation/` 下的对应子目录中（如 `主角动画1`、`骷髅兵`、`史莱姆`、`死神`、`小宝箱`、`大宝箱`、`金币`、`心心`、`商店` 等）。
- 每个目录通常包含：精灵图 PNG（单张或多张）、`animation_config.json`（或带时间戳的配置 JSON）与 `metadata.json`。
- 若 `actions` 的键名包含空格（如 `combo attack`、`be attacked`、`spell cast`），在程序侧需做动作键名标准化（推荐：将空格替换为下划线，例如 `combo_attack`）。

### 10.2 加载与解析
- 地图文件：从 `map/map_full.tmj`（TMJ 内嵌式）加载；瓦片贴图为 `Asset/oak_woods_tileset.png`。
- 动画：启动时扫描所需目录并加载 PNG；随后读取该目录内的 `animation_config*.json`：
  - 解析 `sprite_info.width/height/scale_ratio` 以确定基础帧尺寸与默认缩放；
  - 解析 `layout.columns/rows/padding` 以还原帧网格；
  - **重要**：`layout.padding` 表示精灵图中帧与帧之间的间隔像素数，在使用游戏引擎加载精灵图时必须将此值正确设置为spacing/margin参数，否则会导致动画帧切分错位；
  - 解析 `actions` 下每个动作的帧序列（按 `[row, col]` 坐标）与 `frame_count`；
  - 使用 `frame_rate` 作为该资源默认播放速率（可按动作或实体重载）。

### 10.3 动作集合与对照（实现侧应支持）
- 主角（综合自 `主角动画1` 与 `主角动画2`）：
  - 基础与移动：`idle`、`walking`、`run`、`crouch`；
  - 跳跃链：`jump_prepare`、`flying_up`、`falling`、`landing`、（可选）`jump_reload`；
  - 牵引/墙滑：`wall_slide_start`、`wall_slide_loop`；
  - 战斗：`attack_1hit`、`combo_attack`（来自 `combo attack`）、`shield_defense`、（可选）`spell_cast`；
  - 受击/死亡：`be_attacked`（来自 `be attacked`）、`death`。
- 敌人：
  - 史莱姆：`idle`、`fight`、`death`（scale_ratio=0.5，frame_rate=8）。
  - 骷髅兵：`idle`、`run`、`fight`、`death`（scale_ratio=0.6）。
  - 死神：`idle`、`fight`、`be_attacked`、`death`（scale_ratio=1.0）。
- 交互对象与掉落：
  - 小宝箱/大宝箱：`open`（一次播放并保持最后帧）。
  - 金币：`idle` 旋转（10 FPS），支持存在时长与重力弹跳规则。
  - 心心：`idle` 跳动（10 FPS），支持存在时长与轻微弹跳规则。
  - 商店：`idle` 灯光循环；显示尺寸需按装饰层目标尺寸缩放。

（命名规范与映射，统一下划线风格）
- 引擎内统一使用下划线风格的动作键名；配置文件可保留原名，加载时做标准化映射：
  - `combo attack` → `combo_attack`
  - `be attacked` → `be_attacked`
  - `spell cast` → `spell_cast`

### 10.4 显示与缩放规则
- 角色与敌人：按各自 `sprite_info.scale_ratio` 作为默认缩放；
- 装饰与交互对象：显示尺寸以“装饰层尺寸表”或文档指定尺寸为准，与碰撞体独立；
  - 例：静态 `shop` 渲染为 118×98；`shop_anim` 效果应匹配装饰层显示规范；
  - 宝箱开启动画结束后应保持最后帧作为“已打开”状态。

（UI与商店资源引用）
- UI 金币图标：`Asset/animation/金币图标/coin000.png`；UI 心心图标：`Asset/animation/心心图标/heart_pic000.png`；
- 图标显示建议：按 UI 设计等比缩放，保证清晰度优先；商店/状态栏复用同一套图标资源。

### 10.5 动画事件与判定（程序绑定）
- 以文档定义的关键帧窗口在程序侧绑定事件：
  - 主角：`attack_1hit` 第 3-4 帧触发攻击判定；`combo_attack` 第 1 帧触发判定；`death` 最后一帧触发死亡事件；
  - 敌人：按各自动作说明在相应帧激活命中判定（史莱姆第 3-4 帧、骷髅兵第 5-6 帧、死神第 3-5 帧）。
- 水平镜像：所有角色与敌人动画需支持镜像播放以适配朝向。

（事件与帧率解耦）
- 事件触发应与帧率解耦：当启用降帧或动态帧率调整时，事件按“动作时间轴比例”触发；
- 或者，指定关键动作固定以 10 FPS 播放以保持时间窗口一致（两者择一实施，但需在实现中保持一致性）。
